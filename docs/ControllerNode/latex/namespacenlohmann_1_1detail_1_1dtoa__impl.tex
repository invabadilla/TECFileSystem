\hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl}{}\doxysection{nlohmann\+::detail\+::dtoa\+\_\+impl Namespace Reference}
\label{namespacenlohmann_1_1detail_1_1dtoa__impl}\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}


implements the Grisu2 algorithm for binary to decimal floating-\/point conversion.  


\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}
\item 
struct \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}}
\item 
struct \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\+\_\+power}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Target , typename Source $>$ }\\Target \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a1c5d30eb51e5e994a3f48bde104d2ce8}{reinterpret\+\_\+bits}} (const Source source)
\item 
{\footnotesize template$<$typename Float\+Type $>$ }\\\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}{compute\+\_\+boundaries}} (Float\+Type value)
\item 
\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\+\_\+power}} \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}{get\+\_\+cached\+\_\+power\+\_\+for\+\_\+binary\+\_\+exponent}} (int e)
\item 
int \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}{find\+\_\+largest\+\_\+pow10}} (const std\+::uint32\+\_\+t n, std\+::uint32\+\_\+t \&pow10)
\item 
void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}{grisu2\+\_\+round}} (char $\ast$buf, int len, std\+::uint64\+\_\+t dist, std\+::uint64\+\_\+t delta, std\+::uint64\+\_\+t rest, std\+::uint64\+\_\+t ten\+\_\+k)
\item 
void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}{grisu2\+\_\+digit\+\_\+gen}} (char $\ast$buffer, int \&length, int \&decimal\+\_\+exponent, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\+\_\+minus, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\+\_\+plus)
\item 
void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633}{grisu2}} (char $\ast$buf, int \&len, int \&decimal\+\_\+exponent, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} m\+\_\+minus, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} v, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} m\+\_\+plus)
\item 
{\footnotesize template$<$typename Float\+Type $>$ }\\void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}{grisu2}} (char $\ast$buf, int \&len, int \&decimal\+\_\+exponent, Float\+Type value)
\item 
\mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char $\ast$ \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ad90f19ed10d8133b727df4b9bc5ddf5c}{append\+\_\+exponent}} (char $\ast$buf, int e)
\begin{DoxyCompactList}\small\item\em appends a decimal representation of e to buf \end{DoxyCompactList}\item 
\mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char $\ast$ \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ab441f2761e33839ca48bc2225e14a2a9}{format\+\_\+buffer}} (char $\ast$buf, int len, int decimal\+\_\+exponent, int min\+\_\+exp, int max\+\_\+exp)
\begin{DoxyCompactList}\small\item\em prettify v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr int \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{k\+Alpha}} = -\/60
\item 
constexpr int \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{k\+Gamma}} = -\/32
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
implements the Grisu2 algorithm for binary to decimal floating-\/point conversion. 

This implementation is a slightly modified version of the reference implementation which may be obtained from \href{http://florian.loitsch.com/publications}{\texttt{ http\+://florian.\+loitsch.\+com/publications}} (bench.\+tar.\+gz).

The code is distributed under the MIT license, Copyright (c) 2009 Florian Loitsch.

For a detailed description of the algorithm see\+:

\mbox{[}1\mbox{]} Loitsch, \char`\"{}\+Printing Floating-\/\+Point Numbers Quickly and Accurately with     Integers\char`\"{}, Proceedings of the ACM SIGPLAN 2010 Conference on Programming Language Design and Implementation, PLDI 2010 \mbox{[}2\mbox{]} Burger, Dybvig, \char`\"{}\+Printing Floating-\/\+Point Numbers Quickly and Accurately\char`\"{}, Proceedings of the ACM SIGPLAN 1996 Conference on Programming Language Design and Implementation, PLDI 1996 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_ad90f19ed10d8133b727df4b9bc5ddf5c}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_ad90f19ed10d8133b727df4b9bc5ddf5c}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!append\_exponent@{append\_exponent}}
\index{append\_exponent@{append\_exponent}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{append\_exponent()}{append\_exponent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char$\ast$ nlohmann\+::detail\+::dtoa\+\_\+impl\+::append\+\_\+exponent (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



appends a decimal representation of e to buf 

\begin{DoxyReturn}{Returns}
a pointer to the element following the exponent. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
-\/1000 $<$ e $<$ 1000 
\end{DoxyPrecond}


Definition at line 15262 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15263 \{}
\DoxyCodeLine{15264     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e > -\/1000);}
\DoxyCodeLine{15265     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e <  1000);}
\DoxyCodeLine{15266 }
\DoxyCodeLine{15267     \textcolor{keywordflow}{if} (e < 0)}
\DoxyCodeLine{15268     \{}
\DoxyCodeLine{15269         e = -\/e;}
\DoxyCodeLine{15270         *buf++ = \textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{15271     \}}
\DoxyCodeLine{15272     \textcolor{keywordflow}{else}}
\DoxyCodeLine{15273     \{}
\DoxyCodeLine{15274         *buf++ = \textcolor{charliteral}{'+'};}
\DoxyCodeLine{15275     \}}
\DoxyCodeLine{15276 }
\DoxyCodeLine{15277     \textcolor{keyword}{auto} k = \textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(e);}
\DoxyCodeLine{15278     \textcolor{keywordflow}{if} (k < 10)}
\DoxyCodeLine{15279     \{}
\DoxyCodeLine{15280         \textcolor{comment}{// Always print at least two digits in the exponent.}}
\DoxyCodeLine{15281         \textcolor{comment}{// This is for compatibility with printf("{}\%g"{}).}}
\DoxyCodeLine{15282         *buf++ = \textcolor{charliteral}{'0'};}
\DoxyCodeLine{15283         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k);}
\DoxyCodeLine{15284     \}}
\DoxyCodeLine{15285     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (k < 100)}
\DoxyCodeLine{15286     \{}
\DoxyCodeLine{15287         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k / 10);}
\DoxyCodeLine{15288         k \%= 10;}
\DoxyCodeLine{15289         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k);}
\DoxyCodeLine{15290     \}}
\DoxyCodeLine{15291     \textcolor{keywordflow}{else}}
\DoxyCodeLine{15292     \{}
\DoxyCodeLine{15293         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k / 100);}
\DoxyCodeLine{15294         k \%= 100;}
\DoxyCodeLine{15295         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k / 10);}
\DoxyCodeLine{15296         k \%= 10;}
\DoxyCodeLine{15297         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k);}
\DoxyCodeLine{15298     \}}
\DoxyCodeLine{15299 }
\DoxyCodeLine{15300     \textcolor{keywordflow}{return} buf;}
\DoxyCodeLine{15301 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!compute\_boundaries@{compute\_boundaries}}
\index{compute\_boundaries@{compute\_boundaries}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{compute\_boundaries()}{compute\_boundaries()}}
{\footnotesize\ttfamily template$<$typename Float\+Type $>$ \\
\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} nlohmann\+::detail\+::dtoa\+\_\+impl\+::compute\+\_\+boundaries (\begin{DoxyParamCaption}\item[{Float\+Type}]{value }\end{DoxyParamCaption})}

Compute the (normalized) diyfp representing the input number \textquotesingle{}value\textquotesingle{} and its boundaries.

\begin{DoxyPrecond}{Precondition}
value must be finite and positive 
\end{DoxyPrecond}


Definition at line 14521 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14522 \{}
\DoxyCodeLine{14523     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(std::isfinite(value));}
\DoxyCodeLine{14524     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(value > 0);}
\DoxyCodeLine{14525 }
\DoxyCodeLine{14526     \textcolor{comment}{// Convert the IEEE representation into a diyfp.}}
\DoxyCodeLine{14527     \textcolor{comment}{//}}
\DoxyCodeLine{14528     \textcolor{comment}{// If v is denormal:}}
\DoxyCodeLine{14529     \textcolor{comment}{//      value = 0.F * 2\string^(1 -\/ bias) = (          F) * 2\string^(1 -\/ bias -\/ (p-\/1))}}
\DoxyCodeLine{14530     \textcolor{comment}{// If v is normalized:}}
\DoxyCodeLine{14531     \textcolor{comment}{//      value = 1.F * 2\string^(E -\/ bias) = (2\string^(p-\/1) + F) * 2\string^(E -\/ bias -\/ (p-\/1))}}
\DoxyCodeLine{14532 }
\DoxyCodeLine{14533     static\_assert(std::numeric\_limits<FloatType>::is\_iec559,}
\DoxyCodeLine{14534                   \textcolor{stringliteral}{"{}internal error: dtoa\_short requires an IEEE-\/754 floating-\/point implementation"{}});}
\DoxyCodeLine{14535 }
\DoxyCodeLine{14536     constexpr \textcolor{keywordtype}{int}      kPrecision = std::numeric\_limits<FloatType>::digits; \textcolor{comment}{// = p (includes the hidden bit)}}
\DoxyCodeLine{14537     constexpr \textcolor{keywordtype}{int}      kBias      = std::numeric\_limits<FloatType>::max\_exponent -\/ 1 + (kPrecision -\/ 1);}
\DoxyCodeLine{14538     constexpr \textcolor{keywordtype}{int}      kMinExp    = 1 -\/ kBias;}
\DoxyCodeLine{14539     constexpr std::uint64\_t kHiddenBit = std::uint64\_t\{1\} << (kPrecision -\/ 1); \textcolor{comment}{// = 2\string^(p-\/1)}}
\DoxyCodeLine{14540 }
\DoxyCodeLine{14541     \textcolor{keyword}{using} bits\_type = \textcolor{keyword}{typename} std::conditional<kPrecision == 24, std::uint32\_t, std::uint64\_t >::type;}
\DoxyCodeLine{14542 }
\DoxyCodeLine{14543     \textcolor{keyword}{const} std::uint64\_t bits = reinterpret\_bits<bits\_type>(value);}
\DoxyCodeLine{14544     \textcolor{keyword}{const} std::uint64\_t E = bits >> (kPrecision -\/ 1);}
\DoxyCodeLine{14545     \textcolor{keyword}{const} std::uint64\_t F = bits \& (kHiddenBit -\/ 1);}
\DoxyCodeLine{14546 }
\DoxyCodeLine{14547     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} is\_denormal = E == 0;}
\DoxyCodeLine{14548     \textcolor{keyword}{const} diyfp v = is\_denormal}
\DoxyCodeLine{14549                     ? diyfp(F, kMinExp)}
\DoxyCodeLine{14550                     : diyfp(F + kHiddenBit, static\_cast<int>(E) -\/ kBias);}
\DoxyCodeLine{14551 }
\DoxyCodeLine{14552     \textcolor{comment}{// Compute the boundaries m-\/ and m+ of the floating-\/point value}}
\DoxyCodeLine{14553     \textcolor{comment}{// v = f * 2\string^e.}}
\DoxyCodeLine{14554     \textcolor{comment}{//}}
\DoxyCodeLine{14555     \textcolor{comment}{// Determine v-\/ and v+, the floating-\/point predecessor and successor if v,}}
\DoxyCodeLine{14556     \textcolor{comment}{// respectively.}}
\DoxyCodeLine{14557     \textcolor{comment}{//}}
\DoxyCodeLine{14558     \textcolor{comment}{//      v-\/ = v -\/ 2\string^e        if f != 2\string^(p-\/1) or e == e\_min                (A)}}
\DoxyCodeLine{14559     \textcolor{comment}{//         = v -\/ 2\string^(e-\/1)    if f == 2\string^(p-\/1) and e > e\_min                (B)}}
\DoxyCodeLine{14560     \textcolor{comment}{//}}
\DoxyCodeLine{14561     \textcolor{comment}{//      v+ = v + 2\string^e}}
\DoxyCodeLine{14562     \textcolor{comment}{//}}
\DoxyCodeLine{14563     \textcolor{comment}{// Let m-\/ = (v-\/ + v) / 2 and m+ = (v + v+) / 2. All real numbers \_strictly\_}}
\DoxyCodeLine{14564     \textcolor{comment}{// between m-\/ and m+ round to v, regardless of how the input rounding}}
\DoxyCodeLine{14565     \textcolor{comment}{// algorithm breaks ties.}}
\DoxyCodeLine{14566     \textcolor{comment}{//}}
\DoxyCodeLine{14567     \textcolor{comment}{//      -\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/  (A)}}
\DoxyCodeLine{14568     \textcolor{comment}{//         v-\/            m-\/            v             m+            v+}}
\DoxyCodeLine{14569     \textcolor{comment}{//}}
\DoxyCodeLine{14570     \textcolor{comment}{//      -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/  (B)}}
\DoxyCodeLine{14571     \textcolor{comment}{//                       v-\/     m-\/     v             m+            v+}}
\DoxyCodeLine{14572 }
\DoxyCodeLine{14573     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} lower\_boundary\_is\_closer = F == 0 \&\& E > 1;}
\DoxyCodeLine{14574     \textcolor{keyword}{const} diyfp m\_plus = diyfp(2 * v.f + 1, v.e -\/ 1);}
\DoxyCodeLine{14575     \textcolor{keyword}{const} diyfp m\_minus = lower\_boundary\_is\_closer}
\DoxyCodeLine{14576                           ? diyfp(4 * v.f -\/ 1, v.e -\/ 2)  \textcolor{comment}{// (B)}}
\DoxyCodeLine{14577                           : diyfp(2 * v.f -\/ 1, v.e -\/ 1); \textcolor{comment}{// (A)}}
\DoxyCodeLine{14578 }
\DoxyCodeLine{14579     \textcolor{comment}{// Determine the normalized w+ = m+.}}
\DoxyCodeLine{14580     \textcolor{keyword}{const} diyfp w\_plus = diyfp::normalize(m\_plus);}
\DoxyCodeLine{14581 }
\DoxyCodeLine{14582     \textcolor{comment}{// Determine w-\/ = m-\/ such that e\_(w-\/) = e\_(w+).}}
\DoxyCodeLine{14583     \textcolor{keyword}{const} diyfp w\_minus = diyfp::normalize\_to(m\_minus, w\_plus.e);}
\DoxyCodeLine{14584 }
\DoxyCodeLine{14585     \textcolor{keywordflow}{return} \{diyfp::normalize(v), w\_minus, w\_plus\};}
\DoxyCodeLine{14586 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!find\_largest\_pow10@{find\_largest\_pow10}}
\index{find\_largest\_pow10@{find\_largest\_pow10}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{find\_largest\_pow10()}{find\_largest\_pow10()}}
{\footnotesize\ttfamily int nlohmann\+::detail\+::dtoa\+\_\+impl\+::find\+\_\+largest\+\_\+pow10 (\begin{DoxyParamCaption}\item[{const std\+::uint32\+\_\+t}]{n,  }\item[{std\+::uint32\+\_\+t \&}]{pow10 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

For n != 0, returns k, such that pow10 \+:= 10$^\wedge$(k-\/1) $<$= n $<$ 10$^\wedge$k. For n == 0, returns 1 and sets pow10 \+:= 1. 

Definition at line 14824 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14825 \{}
\DoxyCodeLine{14826     \textcolor{comment}{// LCOV\_EXCL\_START}}
\DoxyCodeLine{14827     \textcolor{keywordflow}{if} (n >= 1000000000)}
\DoxyCodeLine{14828     \{}
\DoxyCodeLine{14829         pow10 = 1000000000;}
\DoxyCodeLine{14830         \textcolor{keywordflow}{return} 10;}
\DoxyCodeLine{14831     \}}
\DoxyCodeLine{14832     \textcolor{comment}{// LCOV\_EXCL\_STOP}}
\DoxyCodeLine{14833     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 100000000)}
\DoxyCodeLine{14834     \{}
\DoxyCodeLine{14835         pow10 = 100000000;}
\DoxyCodeLine{14836         \textcolor{keywordflow}{return}  9;}
\DoxyCodeLine{14837     \}}
\DoxyCodeLine{14838     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 10000000)}
\DoxyCodeLine{14839     \{}
\DoxyCodeLine{14840         pow10 = 10000000;}
\DoxyCodeLine{14841         \textcolor{keywordflow}{return}  8;}
\DoxyCodeLine{14842     \}}
\DoxyCodeLine{14843     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 1000000)}
\DoxyCodeLine{14844     \{}
\DoxyCodeLine{14845         pow10 = 1000000;}
\DoxyCodeLine{14846         \textcolor{keywordflow}{return}  7;}
\DoxyCodeLine{14847     \}}
\DoxyCodeLine{14848     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 100000)}
\DoxyCodeLine{14849     \{}
\DoxyCodeLine{14850         pow10 = 100000;}
\DoxyCodeLine{14851         \textcolor{keywordflow}{return}  6;}
\DoxyCodeLine{14852     \}}
\DoxyCodeLine{14853     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 10000)}
\DoxyCodeLine{14854     \{}
\DoxyCodeLine{14855         pow10 = 10000;}
\DoxyCodeLine{14856         \textcolor{keywordflow}{return}  5;}
\DoxyCodeLine{14857     \}}
\DoxyCodeLine{14858     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 1000)}
\DoxyCodeLine{14859     \{}
\DoxyCodeLine{14860         pow10 = 1000;}
\DoxyCodeLine{14861         \textcolor{keywordflow}{return}  4;}
\DoxyCodeLine{14862     \}}
\DoxyCodeLine{14863     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 100)}
\DoxyCodeLine{14864     \{}
\DoxyCodeLine{14865         pow10 = 100;}
\DoxyCodeLine{14866         \textcolor{keywordflow}{return}  3;}
\DoxyCodeLine{14867     \}}
\DoxyCodeLine{14868     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n >= 10)}
\DoxyCodeLine{14869     \{}
\DoxyCodeLine{14870         pow10 = 10;}
\DoxyCodeLine{14871         \textcolor{keywordflow}{return}  2;}
\DoxyCodeLine{14872     \}}
\DoxyCodeLine{14873     \textcolor{keywordflow}{else}}
\DoxyCodeLine{14874     \{}
\DoxyCodeLine{14875         pow10 = 1;}
\DoxyCodeLine{14876         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{14877     \}}
\DoxyCodeLine{14878 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_ab441f2761e33839ca48bc2225e14a2a9}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_ab441f2761e33839ca48bc2225e14a2a9}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!format\_buffer@{format\_buffer}}
\index{format\_buffer@{format\_buffer}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{format\_buffer()}{format\_buffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char$\ast$ nlohmann\+::detail\+::dtoa\+\_\+impl\+::format\+\_\+buffer (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int}]{len,  }\item[{int}]{decimal\+\_\+exponent,  }\item[{int}]{min\+\_\+exp,  }\item[{int}]{max\+\_\+exp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



prettify v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent 

If v is in the range \mbox{[}10$^\wedge$min\+\_\+exp, 10$^\wedge$max\+\_\+exp) it will be printed in fixed-\/point notation. Otherwise it will be printed in exponential notation.

\begin{DoxyPrecond}{Precondition}
min\+\_\+exp $<$ 0 

max\+\_\+exp $>$ 0 
\end{DoxyPrecond}


Definition at line 15314 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15316 \{}
\DoxyCodeLine{15317     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(min\_exp < 0);}
\DoxyCodeLine{15318     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(max\_exp > 0);}
\DoxyCodeLine{15319 }
\DoxyCodeLine{15320     \textcolor{keyword}{const} \textcolor{keywordtype}{int} k = len;}
\DoxyCodeLine{15321     \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = len + decimal\_exponent;}
\DoxyCodeLine{15322 }
\DoxyCodeLine{15323     \textcolor{comment}{// v = buf * 10\string^(n-\/k)}}
\DoxyCodeLine{15324     \textcolor{comment}{// k is the length of the buffer (number of decimal digits)}}
\DoxyCodeLine{15325     \textcolor{comment}{// n is the position of the decimal point relative to the start of the buffer.}}
\DoxyCodeLine{15326 }
\DoxyCodeLine{15327     \textcolor{keywordflow}{if} (k <= n \&\& n <= max\_exp)}
\DoxyCodeLine{15328     \{}
\DoxyCodeLine{15329         \textcolor{comment}{// digits[000]}}
\DoxyCodeLine{15330         \textcolor{comment}{// len <= max\_exp + 2}}
\DoxyCodeLine{15331 }
\DoxyCodeLine{15332         std::memset(buf + k, \textcolor{charliteral}{'0'}, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n) -\/ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k));}
\DoxyCodeLine{15333         \textcolor{comment}{// Make it look like a floating-\/point number (\#362, \#378)}}
\DoxyCodeLine{15334         buf[n + 0] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{15335         buf[n + 1] = \textcolor{charliteral}{'0'};}
\DoxyCodeLine{15336         \textcolor{keywordflow}{return} buf + (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n) + 2);}
\DoxyCodeLine{15337     \}}
\DoxyCodeLine{15338 }
\DoxyCodeLine{15339     \textcolor{keywordflow}{if} (0 < n \&\& n <= max\_exp)}
\DoxyCodeLine{15340     \{}
\DoxyCodeLine{15341         \textcolor{comment}{// dig.its}}
\DoxyCodeLine{15342         \textcolor{comment}{// len <= max\_digits10 + 1}}
\DoxyCodeLine{15343 }
\DoxyCodeLine{15344         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(k > n);}
\DoxyCodeLine{15345 }
\DoxyCodeLine{15346         std::memmove(buf + (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n) + 1), buf + n, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k) -\/ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n));}
\DoxyCodeLine{15347         buf[n] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{15348         \textcolor{keywordflow}{return} buf + (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k) + 1U);}
\DoxyCodeLine{15349     \}}
\DoxyCodeLine{15350 }
\DoxyCodeLine{15351     \textcolor{keywordflow}{if} (min\_exp < n \&\& n <= 0)}
\DoxyCodeLine{15352     \{}
\DoxyCodeLine{15353         \textcolor{comment}{// 0.[000]digits}}
\DoxyCodeLine{15354         \textcolor{comment}{// len <= 2 + (-\/min\_exp -\/ 1) + max\_digits10}}
\DoxyCodeLine{15355 }
\DoxyCodeLine{15356         std::memmove(buf + (2 + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(-\/n)), buf, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k));}
\DoxyCodeLine{15357         buf[0] = \textcolor{charliteral}{'0'};}
\DoxyCodeLine{15358         buf[1] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{15359         std::memset(buf + 2, \textcolor{charliteral}{'0'}, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(-\/n));}
\DoxyCodeLine{15360         \textcolor{keywordflow}{return} buf + (2U + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(-\/n) + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k));}
\DoxyCodeLine{15361     \}}
\DoxyCodeLine{15362 }
\DoxyCodeLine{15363     \textcolor{keywordflow}{if} (k == 1)}
\DoxyCodeLine{15364     \{}
\DoxyCodeLine{15365         \textcolor{comment}{// dE+123}}
\DoxyCodeLine{15366         \textcolor{comment}{// len <= 1 + 5}}
\DoxyCodeLine{15367 }
\DoxyCodeLine{15368         buf += 1;}
\DoxyCodeLine{15369     \}}
\DoxyCodeLine{15370     \textcolor{keywordflow}{else}}
\DoxyCodeLine{15371     \{}
\DoxyCodeLine{15372         \textcolor{comment}{// d.igitsE+123}}
\DoxyCodeLine{15373         \textcolor{comment}{// len <= max\_digits10 + 1 + 5}}
\DoxyCodeLine{15374 }
\DoxyCodeLine{15375         std::memmove(buf + 2, buf + 1, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k) -\/ 1);}
\DoxyCodeLine{15376         buf[1] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{15377         buf += 1 + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k);}
\DoxyCodeLine{15378     \}}
\DoxyCodeLine{15379 }
\DoxyCodeLine{15380     *buf++ = \textcolor{charliteral}{'e'};}
\DoxyCodeLine{15381     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ad90f19ed10d8133b727df4b9bc5ddf5c}{append\_exponent}}(buf, n -\/ 1);}
\DoxyCodeLine{15382 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!get\_cached\_power\_for\_binary\_exponent@{get\_cached\_power\_for\_binary\_exponent}}
\index{get\_cached\_power\_for\_binary\_exponent@{get\_cached\_power\_for\_binary\_exponent}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{get\_cached\_power\_for\_binary\_exponent()}{get\_cached\_power\_for\_binary\_exponent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\+\_\+power}} nlohmann\+::detail\+::dtoa\+\_\+impl\+::get\+\_\+cached\+\_\+power\+\_\+for\+\_\+binary\+\_\+exponent (\begin{DoxyParamCaption}\item[{int}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

For a normalized diyfp w = f $\ast$ 2$^\wedge$e, this function returns a (normalized) cached power-\/of-\/ten c = f\+\_\+c $\ast$ 2$^\wedge$e\+\_\+c, such that the exponent of the product w $\ast$ c satisfies (Definition 3.\+2 from \mbox{[}1\mbox{]}) \begin{DoxyVerb} alpha <= e_c + e + q <= gamma.
\end{DoxyVerb}
 

Definition at line 14660 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14661 \{}
\DoxyCodeLine{14662     \textcolor{comment}{// Now}}
\DoxyCodeLine{14663     \textcolor{comment}{//}}
\DoxyCodeLine{14664     \textcolor{comment}{//      alpha <= e\_c + e + q <= gamma                                    (1)}}
\DoxyCodeLine{14665     \textcolor{comment}{//      ==> f\_c * 2\string^alpha <= c * 2\string^e * 2\string^q}}
\DoxyCodeLine{14666     \textcolor{comment}{//}}
\DoxyCodeLine{14667     \textcolor{comment}{// and since the c's are normalized, 2\string^(q-\/1) <= f\_c,}}
\DoxyCodeLine{14668     \textcolor{comment}{//}}
\DoxyCodeLine{14669     \textcolor{comment}{//      ==> 2\string^(q -\/ 1 + alpha) <= c * 2\string^(e + q)}}
\DoxyCodeLine{14670     \textcolor{comment}{//      ==> 2\string^(alpha -\/ e -\/ 1) <= c}}
\DoxyCodeLine{14671     \textcolor{comment}{//}}
\DoxyCodeLine{14672     \textcolor{comment}{// If c were an exact power of ten, i.e. c = 10\string^k, one may determine k as}}
\DoxyCodeLine{14673     \textcolor{comment}{//}}
\DoxyCodeLine{14674     \textcolor{comment}{//      k = ceil( log\_10( 2\string^(alpha -\/ e -\/ 1) ) )}}
\DoxyCodeLine{14675     \textcolor{comment}{//        = ceil( (alpha -\/ e -\/ 1) * log\_10(2) )}}
\DoxyCodeLine{14676     \textcolor{comment}{//}}
\DoxyCodeLine{14677     \textcolor{comment}{// From the paper:}}
\DoxyCodeLine{14678     \textcolor{comment}{// "{}In theory the result of the procedure could be wrong since c is rounded,}}
\DoxyCodeLine{14679     \textcolor{comment}{//  and the computation itself is approximated [...]. In practice, however,}}
\DoxyCodeLine{14680     \textcolor{comment}{//  this simple function is sufficient."{}}}
\DoxyCodeLine{14681     \textcolor{comment}{//}}
\DoxyCodeLine{14682     \textcolor{comment}{// For IEEE double precision floating-\/point numbers converted into}}
\DoxyCodeLine{14683     \textcolor{comment}{// normalized diyfp's w = f * 2\string^e, with q = 64,}}
\DoxyCodeLine{14684     \textcolor{comment}{//}}
\DoxyCodeLine{14685     \textcolor{comment}{//      e >= -\/1022      (min IEEE exponent)}}
\DoxyCodeLine{14686     \textcolor{comment}{//           -\/52        (p -\/ 1)}}
\DoxyCodeLine{14687     \textcolor{comment}{//           -\/52        (p -\/ 1, possibly normalize denormal IEEE numbers)}}
\DoxyCodeLine{14688     \textcolor{comment}{//           -\/11        (normalize the diyfp)}}
\DoxyCodeLine{14689     \textcolor{comment}{//         = -\/1137}}
\DoxyCodeLine{14690     \textcolor{comment}{//}}
\DoxyCodeLine{14691     \textcolor{comment}{// and}}
\DoxyCodeLine{14692     \textcolor{comment}{//}}
\DoxyCodeLine{14693     \textcolor{comment}{//      e <= +1023      (max IEEE exponent)}}
\DoxyCodeLine{14694     \textcolor{comment}{//           -\/52        (p -\/ 1)}}
\DoxyCodeLine{14695     \textcolor{comment}{//           -\/11        (normalize the diyfp)}}
\DoxyCodeLine{14696     \textcolor{comment}{//         = 960}}
\DoxyCodeLine{14697     \textcolor{comment}{//}}
\DoxyCodeLine{14698     \textcolor{comment}{// This binary exponent range [-\/1137,960] results in a decimal exponent}}
\DoxyCodeLine{14699     \textcolor{comment}{// range [-\/307,324]. One does not need to store a cached power for each}}
\DoxyCodeLine{14700     \textcolor{comment}{// k in this range. For each such k it suffices to find a cached power}}
\DoxyCodeLine{14701     \textcolor{comment}{// such that the exponent of the product lies in [alpha,gamma].}}
\DoxyCodeLine{14702     \textcolor{comment}{// This implies that the difference of the decimal exponents of adjacent}}
\DoxyCodeLine{14703     \textcolor{comment}{// table entries must be less than or equal to}}
\DoxyCodeLine{14704     \textcolor{comment}{//}}
\DoxyCodeLine{14705     \textcolor{comment}{//      floor( (gamma -\/ alpha) * log\_10(2) ) = 8.}}
\DoxyCodeLine{14706     \textcolor{comment}{//}}
\DoxyCodeLine{14707     \textcolor{comment}{// (A smaller distance gamma-\/alpha would require a larger table.)}}
\DoxyCodeLine{14708 }
\DoxyCodeLine{14709     \textcolor{comment}{// NB:}}
\DoxyCodeLine{14710     \textcolor{comment}{// Actually this function returns c, such that -\/60 <= e\_c + e + 64 <= -\/34.}}
\DoxyCodeLine{14711 }
\DoxyCodeLine{14712     constexpr \textcolor{keywordtype}{int} kCachedPowersMinDecExp = -\/300;}
\DoxyCodeLine{14713     constexpr \textcolor{keywordtype}{int} kCachedPowersDecStep = 8;}
\DoxyCodeLine{14714 }
\DoxyCodeLine{14715     \textcolor{keyword}{static} constexpr std::array<cached\_power, 79> kCachedPowers =}
\DoxyCodeLine{14716     \{}
\DoxyCodeLine{14717         \{}
\DoxyCodeLine{14718             \{ 0xAB70FE17C79AC6CA, -\/1060, -\/300 \},}
\DoxyCodeLine{14719             \{ 0xFF77B1FCBEBCDC4F, -\/1034, -\/292 \},}
\DoxyCodeLine{14720             \{ 0xBE5691EF416BD60C, -\/1007, -\/284 \},}
\DoxyCodeLine{14721             \{ 0x8DD01FAD907FFC3C,  -\/980, -\/276 \},}
\DoxyCodeLine{14722             \{ 0xD3515C2831559A83,  -\/954, -\/268 \},}
\DoxyCodeLine{14723             \{ 0x9D71AC8FADA6C9B5,  -\/927, -\/260 \},}
\DoxyCodeLine{14724             \{ 0xEA9C227723EE8BCB,  -\/901, -\/252 \},}
\DoxyCodeLine{14725             \{ 0xAECC49914078536D,  -\/874, -\/244 \},}
\DoxyCodeLine{14726             \{ 0x823C12795DB6CE57,  -\/847, -\/236 \},}
\DoxyCodeLine{14727             \{ 0xC21094364DFB5637,  -\/821, -\/228 \},}
\DoxyCodeLine{14728             \{ 0x9096EA6F3848984F,  -\/794, -\/220 \},}
\DoxyCodeLine{14729             \{ 0xD77485CB25823AC7,  -\/768, -\/212 \},}
\DoxyCodeLine{14730             \{ 0xA086CFCD97BF97F4,  -\/741, -\/204 \},}
\DoxyCodeLine{14731             \{ 0xEF340A98172AACE5,  -\/715, -\/196 \},}
\DoxyCodeLine{14732             \{ 0xB23867FB2A35B28E,  -\/688, -\/188 \},}
\DoxyCodeLine{14733             \{ 0x84C8D4DFD2C63F3B,  -\/661, -\/180 \},}
\DoxyCodeLine{14734             \{ 0xC5DD44271AD3CDBA,  -\/635, -\/172 \},}
\DoxyCodeLine{14735             \{ 0x936B9FCEBB25C996,  -\/608, -\/164 \},}
\DoxyCodeLine{14736             \{ 0xDBAC6C247D62A584,  -\/582, -\/156 \},}
\DoxyCodeLine{14737             \{ 0xA3AB66580D5FDAF6,  -\/555, -\/148 \},}
\DoxyCodeLine{14738             \{ 0xF3E2F893DEC3F126,  -\/529, -\/140 \},}
\DoxyCodeLine{14739             \{ 0xB5B5ADA8AAFF80B8,  -\/502, -\/132 \},}
\DoxyCodeLine{14740             \{ 0x87625F056C7C4A8B,  -\/475, -\/124 \},}
\DoxyCodeLine{14741             \{ 0xC9BCFF6034C13053,  -\/449, -\/116 \},}
\DoxyCodeLine{14742             \{ 0x964E858C91BA2655,  -\/422, -\/108 \},}
\DoxyCodeLine{14743             \{ 0xDFF9772470297EBD,  -\/396, -\/100 \},}
\DoxyCodeLine{14744             \{ 0xA6DFBD9FB8E5B88F,  -\/369,  -\/92 \},}
\DoxyCodeLine{14745             \{ 0xF8A95FCF88747D94,  -\/343,  -\/84 \},}
\DoxyCodeLine{14746             \{ 0xB94470938FA89BCF,  -\/316,  -\/76 \},}
\DoxyCodeLine{14747             \{ 0x8A08F0F8BF0F156B,  -\/289,  -\/68 \},}
\DoxyCodeLine{14748             \{ 0xCDB02555653131B6,  -\/263,  -\/60 \},}
\DoxyCodeLine{14749             \{ 0x993FE2C6D07B7FAC,  -\/236,  -\/52 \},}
\DoxyCodeLine{14750             \{ 0xE45C10C42A2B3B06,  -\/210,  -\/44 \},}
\DoxyCodeLine{14751             \{ 0xAA242499697392D3,  -\/183,  -\/36 \},}
\DoxyCodeLine{14752             \{ 0xFD87B5F28300CA0E,  -\/157,  -\/28 \},}
\DoxyCodeLine{14753             \{ 0xBCE5086492111AEB,  -\/130,  -\/20 \},}
\DoxyCodeLine{14754             \{ 0x8CBCCC096F5088CC,  -\/103,  -\/12 \},}
\DoxyCodeLine{14755             \{ 0xD1B71758E219652C,   -\/77,   -\/4 \},}
\DoxyCodeLine{14756             \{ 0x9C40000000000000,   -\/50,    4 \},}
\DoxyCodeLine{14757             \{ 0xE8D4A51000000000,   -\/24,   12 \},}
\DoxyCodeLine{14758             \{ 0xAD78EBC5AC620000,     3,   20 \},}
\DoxyCodeLine{14759             \{ 0x813F3978F8940984,    30,   28 \},}
\DoxyCodeLine{14760             \{ 0xC097CE7BC90715B3,    56,   36 \},}
\DoxyCodeLine{14761             \{ 0x8F7E32CE7BEA5C70,    83,   44 \},}
\DoxyCodeLine{14762             \{ 0xD5D238A4ABE98068,   109,   52 \},}
\DoxyCodeLine{14763             \{ 0x9F4F2726179A2245,   136,   60 \},}
\DoxyCodeLine{14764             \{ 0xED63A231D4C4FB27,   162,   68 \},}
\DoxyCodeLine{14765             \{ 0xB0DE65388CC8ADA8,   189,   76 \},}
\DoxyCodeLine{14766             \{ 0x83C7088E1AAB65DB,   216,   84 \},}
\DoxyCodeLine{14767             \{ 0xC45D1DF942711D9A,   242,   92 \},}
\DoxyCodeLine{14768             \{ 0x924D692CA61BE758,   269,  100 \},}
\DoxyCodeLine{14769             \{ 0xDA01EE641A708DEA,   295,  108 \},}
\DoxyCodeLine{14770             \{ 0xA26DA3999AEF774A,   322,  116 \},}
\DoxyCodeLine{14771             \{ 0xF209787BB47D6B85,   348,  124 \},}
\DoxyCodeLine{14772             \{ 0xB454E4A179DD1877,   375,  132 \},}
\DoxyCodeLine{14773             \{ 0x865B86925B9BC5C2,   402,  140 \},}
\DoxyCodeLine{14774             \{ 0xC83553C5C8965D3D,   428,  148 \},}
\DoxyCodeLine{14775             \{ 0x952AB45CFA97A0B3,   455,  156 \},}
\DoxyCodeLine{14776             \{ 0xDE469FBD99A05FE3,   481,  164 \},}
\DoxyCodeLine{14777             \{ 0xA59BC234DB398C25,   508,  172 \},}
\DoxyCodeLine{14778             \{ 0xF6C69A72A3989F5C,   534,  180 \},}
\DoxyCodeLine{14779             \{ 0xB7DCBF5354E9BECE,   561,  188 \},}
\DoxyCodeLine{14780             \{ 0x88FCF317F22241E2,   588,  196 \},}
\DoxyCodeLine{14781             \{ 0xCC20CE9BD35C78A5,   614,  204 \},}
\DoxyCodeLine{14782             \{ 0x98165AF37B2153DF,   641,  212 \},}
\DoxyCodeLine{14783             \{ 0xE2A0B5DC971F303A,   667,  220 \},}
\DoxyCodeLine{14784             \{ 0xA8D9D1535CE3B396,   694,  228 \},}
\DoxyCodeLine{14785             \{ 0xFB9B7CD9A4A7443C,   720,  236 \},}
\DoxyCodeLine{14786             \{ 0xBB764C4CA7A44410,   747,  244 \},}
\DoxyCodeLine{14787             \{ 0x8BAB8EEFB6409C1A,   774,  252 \},}
\DoxyCodeLine{14788             \{ 0xD01FEF10A657842C,   800,  260 \},}
\DoxyCodeLine{14789             \{ 0x9B10A4E5E9913129,   827,  268 \},}
\DoxyCodeLine{14790             \{ 0xE7109BFBA19C0C9D,   853,  276 \},}
\DoxyCodeLine{14791             \{ 0xAC2820D9623BF429,   880,  284 \},}
\DoxyCodeLine{14792             \{ 0x80444B5E7AA7CF85,   907,  292 \},}
\DoxyCodeLine{14793             \{ 0xBF21E44003ACDD2D,   933,  300 \},}
\DoxyCodeLine{14794             \{ 0x8E679C2F5E44FF8F,   960,  308 \},}
\DoxyCodeLine{14795             \{ 0xD433179D9C8CB841,   986,  316 \},}
\DoxyCodeLine{14796             \{ 0x9E19DB92B4E31BA9,  1013,  324 \},}
\DoxyCodeLine{14797         \}}
\DoxyCodeLine{14798     \};}
\DoxyCodeLine{14799 }
\DoxyCodeLine{14800     \textcolor{comment}{// This computation gives exactly the same results for k as}}
\DoxyCodeLine{14801     \textcolor{comment}{//      k = ceil((kAlpha -\/ e -\/ 1) * 0.30102999566398114)}}
\DoxyCodeLine{14802     \textcolor{comment}{// for |e| <= 1500, but doesn't require floating-\/point operations.}}
\DoxyCodeLine{14803     \textcolor{comment}{// NB: log\_10(2) \string~= 78913 / 2\string^18}}
\DoxyCodeLine{14804     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e >= -\/1500);}
\DoxyCodeLine{14805     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e <=  1500);}
\DoxyCodeLine{14806     \textcolor{keyword}{const} \textcolor{keywordtype}{int} f = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}} -\/ e -\/ 1;}
\DoxyCodeLine{14807     \textcolor{keyword}{const} \textcolor{keywordtype}{int} k = (f * 78913) / (1 << 18) + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(f > 0);}
\DoxyCodeLine{14808 }
\DoxyCodeLine{14809     \textcolor{keyword}{const} \textcolor{keywordtype}{int} index = (-\/kCachedPowersMinDecExp + k + (kCachedPowersDecStep -\/ 1)) / kCachedPowersDecStep;}
\DoxyCodeLine{14810     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(index >= 0);}
\DoxyCodeLine{14811     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(\textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(index) < kCachedPowers.size());}
\DoxyCodeLine{14812 }
\DoxyCodeLine{14813     \textcolor{keyword}{const} cached\_power cached = kCachedPowers[\textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(index)];}
\DoxyCodeLine{14814     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}} <= cached.e + e + 64);}
\DoxyCodeLine{14815     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{kGamma}} >= cached.e + e + 64);}
\DoxyCodeLine{14816 }
\DoxyCodeLine{14817     \textcolor{keywordflow}{return} cached;}
\DoxyCodeLine{14818 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2@{grisu2}}
\index{grisu2@{grisu2}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2()}{grisu2()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2 (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int \&}]{len,  }\item[{int \&}]{decimal\+\_\+exponent,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{m\+\_\+minus,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{v,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{m\+\_\+plus }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.\+e. $>$= max\+\_\+digits10. 

Definition at line 15162 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15164 \{}
\DoxyCodeLine{15165     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(m\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} == m\_minus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{15166     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(m\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} == v.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{15167 }
\DoxyCodeLine{15168     \textcolor{comment}{//  -\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/    (A)}}
\DoxyCodeLine{15169     \textcolor{comment}{//          m-\/                      v                       m+}}
\DoxyCodeLine{15170     \textcolor{comment}{//}}
\DoxyCodeLine{15171     \textcolor{comment}{//  -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/    (B)}}
\DoxyCodeLine{15172     \textcolor{comment}{//                      m-\/          v                       m+}}
\DoxyCodeLine{15173     \textcolor{comment}{//}}
\DoxyCodeLine{15174     \textcolor{comment}{// First scale v (and m-\/ and m+) such that the exponent is in the range}}
\DoxyCodeLine{15175     \textcolor{comment}{// [alpha, gamma].}}
\DoxyCodeLine{15176 }
\DoxyCodeLine{15177     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\_power}} cached = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}{get\_cached\_power\_for\_binary\_exponent}}(m\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{15178 }
\DoxyCodeLine{15179     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} c\_minus\_k(cached.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power_a21ae81f515f5b08d5bf423775ee56074}{f}}, cached.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power_a9e89bc89bb7bf4361f43ea27eed91d23}{e}}); \textcolor{comment}{// = c \string~= 10\string^-\/k}}
\DoxyCodeLine{15180 }
\DoxyCodeLine{15181     \textcolor{comment}{// The exponent of the products is = v.e + c\_minus\_k.e + q and is in the range [alpha,gamma]}}
\DoxyCodeLine{15182     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w       = diyfp::mul(v,       c\_minus\_k);}
\DoxyCodeLine{15183     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w\_minus = diyfp::mul(m\_minus, c\_minus\_k);}
\DoxyCodeLine{15184     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w\_plus  = diyfp::mul(m\_plus,  c\_minus\_k);}
\DoxyCodeLine{15185 }
\DoxyCodeLine{15186     \textcolor{comment}{//  -\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/}}
\DoxyCodeLine{15187     \textcolor{comment}{//          w-\/                      w                       w+}}
\DoxyCodeLine{15188     \textcolor{comment}{//          = c*m-\/                  = c*v                   = c*m+}}
\DoxyCodeLine{15189     \textcolor{comment}{//}}
\DoxyCodeLine{15190     \textcolor{comment}{// diyfp::mul rounds its result and c\_minus\_k is approximated too. w, w-\/ and}}
\DoxyCodeLine{15191     \textcolor{comment}{// w+ are now off by a small amount.}}
\DoxyCodeLine{15192     \textcolor{comment}{// In fact:}}
\DoxyCodeLine{15193     \textcolor{comment}{//}}
\DoxyCodeLine{15194     \textcolor{comment}{//      w -\/ v * 10\string^k < 1 ulp}}
\DoxyCodeLine{15195     \textcolor{comment}{//}}
\DoxyCodeLine{15196     \textcolor{comment}{// To account for this inaccuracy, add resp. subtract 1 ulp.}}
\DoxyCodeLine{15197     \textcolor{comment}{//}}
\DoxyCodeLine{15198     \textcolor{comment}{//  -\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15199     \textcolor{comment}{//          w-\/  M-\/                  w                   M+  w+}}
\DoxyCodeLine{15200     \textcolor{comment}{//}}
\DoxyCodeLine{15201     \textcolor{comment}{// Now any number in [M-\/, M+] (bounds included) will round to w when input,}}
\DoxyCodeLine{15202     \textcolor{comment}{// regardless of how the input rounding algorithm breaks ties.}}
\DoxyCodeLine{15203     \textcolor{comment}{//}}
\DoxyCodeLine{15204     \textcolor{comment}{// And digit\_gen generates the shortest possible such number in [M-\/, M+].}}
\DoxyCodeLine{15205     \textcolor{comment}{// Note that this does not mean that Grisu2 always generates the shortest}}
\DoxyCodeLine{15206     \textcolor{comment}{// possible number in the interval (m-\/, m+).}}
\DoxyCodeLine{15207     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\_minus(w\_minus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}} + 1, w\_minus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{15208     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\_plus (w\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}}  -\/ 1, w\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} );}
\DoxyCodeLine{15209 }
\DoxyCodeLine{15210     decimal\_exponent = -\/cached.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power_a8c1f2efed643eeaa8fae83c697a29c6a}{k}}; \textcolor{comment}{// = -\/(-\/k) = k}}
\DoxyCodeLine{15211 }
\DoxyCodeLine{15212     \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}{grisu2\_digit\_gen}}(buf, len, decimal\_exponent, M\_minus, w, M\_plus);}
\DoxyCodeLine{15213 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2@{grisu2}}
\index{grisu2@{grisu2}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2()}{grisu2()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename Float\+Type $>$ \\
void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2 (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int \&}]{len,  }\item[{int \&}]{decimal\+\_\+exponent,  }\item[{Float\+Type}]{value }\end{DoxyParamCaption})}

v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.\+e. $>$= max\+\_\+digits10. 

Definition at line 15222 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15223 \{}
\DoxyCodeLine{15224     static\_assert(diyfp::kPrecision >= std::numeric\_limits<FloatType>::digits + 3,}
\DoxyCodeLine{15225                   \textcolor{stringliteral}{"{}internal error: not enough precision"{}});}
\DoxyCodeLine{15226 }
\DoxyCodeLine{15227     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(std::isfinite(value));}
\DoxyCodeLine{15228     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(value > 0);}
\DoxyCodeLine{15229 }
\DoxyCodeLine{15230     \textcolor{comment}{// If the neighbors (and boundaries) of 'value' are always computed for double-\/precision}}
\DoxyCodeLine{15231     \textcolor{comment}{// numbers, all float's can be recovered using strtod (and strtof). However, the resulting}}
\DoxyCodeLine{15232     \textcolor{comment}{// decimal representations are not exactly "{}short"{}.}}
\DoxyCodeLine{15233     \textcolor{comment}{//}}
\DoxyCodeLine{15234     \textcolor{comment}{// The documentation for 'std::to\_chars' (https://en.cppreference.com/w/cpp/utility/to\_chars)}}
\DoxyCodeLine{15235     \textcolor{comment}{// says "{}value is converted to a string as if by std::sprintf in the default ("{}C"{}) locale"{}}}
\DoxyCodeLine{15236     \textcolor{comment}{// and since sprintf promotes float's to double's, I think this is exactly what 'std::to\_chars'}}
\DoxyCodeLine{15237     \textcolor{comment}{// does.}}
\DoxyCodeLine{15238     \textcolor{comment}{// On the other hand, the documentation for 'std::to\_chars' requires that "{}parsing the}}
\DoxyCodeLine{15239     \textcolor{comment}{// representation using the corresponding std::from\_chars function recovers value exactly"{}. That}}
\DoxyCodeLine{15240     \textcolor{comment}{// indicates that single precision floating-\/point numbers should be recovered using}}
\DoxyCodeLine{15241     \textcolor{comment}{// 'std::strtof'.}}
\DoxyCodeLine{15242     \textcolor{comment}{//}}
\DoxyCodeLine{15243     \textcolor{comment}{// NB: If the neighbors are computed for single-\/precision numbers, there is a single float}}
\DoxyCodeLine{15244     \textcolor{comment}{//     (7.0385307e-\/26f) which can't be recovered using strtod. The resulting double precision}}
\DoxyCodeLine{15245     \textcolor{comment}{//     value is off by 1 ulp.}}
\DoxyCodeLine{15246 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{15247     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} w = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}{compute\_boundaries}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{15248 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{15249     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} w = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}{compute\_boundaries}}(value);}
\DoxyCodeLine{15250 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{15251 }
\DoxyCodeLine{15252     \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}{grisu2}}(buf, len, decimal\_exponent, w.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries_aec4e5028333c01f3229062f31ce16763}{minus}}, w.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries_ad1668c60aeade5f2557fafed8b8aee1a}{w}}, w.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries_a3321ae2816a6ec5250a0d8e29f798232}{plus}});}
\DoxyCodeLine{15253 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2\_digit\_gen@{grisu2\_digit\_gen}}
\index{grisu2\_digit\_gen@{grisu2\_digit\_gen}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2\_digit\_gen()}{grisu2\_digit\_gen()}}
{\footnotesize\ttfamily void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2\+\_\+digit\+\_\+gen (\begin{DoxyParamCaption}\item[{char $\ast$}]{buffer,  }\item[{int \&}]{length,  }\item[{int \&}]{decimal\+\_\+exponent,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{M\+\_\+minus,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{w,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{M\+\_\+plus }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Generates V = buffer $\ast$ 10$^\wedge$decimal\+\_\+exponent, such that M-\/ $<$= V $<$= M+. M-\/ and M+ must be normalized and share the same exponent -\/60 $<$= e $<$= -\/32. 

Definition at line 14921 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14923 \{}
\DoxyCodeLine{14924     static\_assert(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}} >= -\/60, \textcolor{stringliteral}{"{}internal error"{}});}
\DoxyCodeLine{14925     static\_assert(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{kGamma}} <= -\/32, \textcolor{stringliteral}{"{}internal error"{}});}
\DoxyCodeLine{14926 }
\DoxyCodeLine{14927     \textcolor{comment}{// Generates the digits (and the exponent) of a decimal floating-\/point}}
\DoxyCodeLine{14928     \textcolor{comment}{// number V = buffer * 10\string^decimal\_exponent in the range [M-\/, M+]. The diyfp's}}
\DoxyCodeLine{14929     \textcolor{comment}{// w, M-\/ and M+ share the same exponent e, which satisfies alpha <= e <= gamma.}}
\DoxyCodeLine{14930     \textcolor{comment}{//}}
\DoxyCodeLine{14931     \textcolor{comment}{//               <-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ delta -\/-\/-\/-\/>}}
\DoxyCodeLine{14932     \textcolor{comment}{//                                  <-\/-\/-\/-\/ dist -\/-\/-\/-\/-\/-\/-\/-\/-\/>}}
\DoxyCodeLine{14933     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{14934     \textcolor{comment}{//               M-\/                 w                   M+}}
\DoxyCodeLine{14935     \textcolor{comment}{//}}
\DoxyCodeLine{14936     \textcolor{comment}{// Grisu2 generates the digits of M+ from left to right and stops as soon as}}
\DoxyCodeLine{14937     \textcolor{comment}{// V is in [M-\/,M+].}}
\DoxyCodeLine{14938 }
\DoxyCodeLine{14939     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} >= \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}});}
\DoxyCodeLine{14940     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} <= \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{kGamma}});}
\DoxyCodeLine{14941 }
\DoxyCodeLine{14942     std::uint64\_t delta = diyfp::sub(M\_plus, M\_minus).f; \textcolor{comment}{// (significand of (M+ -\/ M-\/), implicit exponent is e)}}
\DoxyCodeLine{14943     std::uint64\_t dist  = diyfp::sub(M\_plus, w      ).f; \textcolor{comment}{// (significand of (M+ -\/ w ), implicit exponent is e)}}
\DoxyCodeLine{14944 }
\DoxyCodeLine{14945     \textcolor{comment}{// Split M+ = f * 2\string^e into two parts p1 and p2 (note: e < 0):}}
\DoxyCodeLine{14946     \textcolor{comment}{//}}
\DoxyCodeLine{14947     \textcolor{comment}{//      M+ = f * 2\string^e}}
\DoxyCodeLine{14948     \textcolor{comment}{//         = ((f div 2\string^-\/e) * 2\string^-\/e + (f mod 2\string^-\/e)) * 2\string^e}}
\DoxyCodeLine{14949     \textcolor{comment}{//         = ((p1        ) * 2\string^-\/e + (p2        )) * 2\string^e}}
\DoxyCodeLine{14950     \textcolor{comment}{//         = p1 + p2 * 2\string^e}}
\DoxyCodeLine{14951 }
\DoxyCodeLine{14952     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} one(std::uint64\_t\{1\} << -\/M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}}, M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{14953 }
\DoxyCodeLine{14954     \textcolor{keyword}{auto} p1 = \textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}} >> -\/one.e); \textcolor{comment}{// p1 = f div 2\string^-\/e (Since -\/e >= 32, p1 fits into a 32-\/bit int.)}}
\DoxyCodeLine{14955     std::uint64\_t p2 = M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}} \& (one.f -\/ 1);                    \textcolor{comment}{// p2 = f mod 2\string^-\/e}}
\DoxyCodeLine{14956 }
\DoxyCodeLine{14957     \textcolor{comment}{// 1)}}
\DoxyCodeLine{14958     \textcolor{comment}{//}}
\DoxyCodeLine{14959     \textcolor{comment}{// Generate the digits of the integral part p1 = d[n-\/1]...d[1]d[0]}}
\DoxyCodeLine{14960 }
\DoxyCodeLine{14961     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(p1 > 0);}
\DoxyCodeLine{14962 }
\DoxyCodeLine{14963     std::uint32\_t pow10;}
\DoxyCodeLine{14964     \textcolor{keyword}{const} \textcolor{keywordtype}{int} k = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}{find\_largest\_pow10}}(p1, pow10);}
\DoxyCodeLine{14965 }
\DoxyCodeLine{14966     \textcolor{comment}{//      10\string^(k-\/1) <= p1 < 10\string^k, pow10 = 10\string^(k-\/1)}}
\DoxyCodeLine{14967     \textcolor{comment}{//}}
\DoxyCodeLine{14968     \textcolor{comment}{//      p1 = (p1 div 10\string^(k-\/1)) * 10\string^(k-\/1) + (p1 mod 10\string^(k-\/1))}}
\DoxyCodeLine{14969     \textcolor{comment}{//         = (d[k-\/1]         ) * 10\string^(k-\/1) + (p1 mod 10\string^(k-\/1))}}
\DoxyCodeLine{14970     \textcolor{comment}{//}}
\DoxyCodeLine{14971     \textcolor{comment}{//      M+ = p1                                             + p2 * 2\string^e}}
\DoxyCodeLine{14972     \textcolor{comment}{//         = d[k-\/1] * 10\string^(k-\/1) + (p1 mod 10\string^(k-\/1))          + p2 * 2\string^e}}
\DoxyCodeLine{14973     \textcolor{comment}{//         = d[k-\/1] * 10\string^(k-\/1) + ((p1 mod 10\string^(k-\/1)) * 2\string^-\/e + p2) * 2\string^e}}
\DoxyCodeLine{14974     \textcolor{comment}{//         = d[k-\/1] * 10\string^(k-\/1) + (                         rest) * 2\string^e}}
\DoxyCodeLine{14975     \textcolor{comment}{//}}
\DoxyCodeLine{14976     \textcolor{comment}{// Now generate the digits d[n] of p1 from left to right (n = k-\/1,...,0)}}
\DoxyCodeLine{14977     \textcolor{comment}{//}}
\DoxyCodeLine{14978     \textcolor{comment}{//      p1 = d[k-\/1]...d[n] * 10\string^n + d[n-\/1]...d[0]}}
\DoxyCodeLine{14979     \textcolor{comment}{//}}
\DoxyCodeLine{14980     \textcolor{comment}{// but stop as soon as}}
\DoxyCodeLine{14981     \textcolor{comment}{//}}
\DoxyCodeLine{14982     \textcolor{comment}{//      rest * 2\string^e = (d[n-\/1]...d[0] * 2\string^-\/e + p2) * 2\string^e <= delta * 2\string^e}}
\DoxyCodeLine{14983 }
\DoxyCodeLine{14984     \textcolor{keywordtype}{int} n = k;}
\DoxyCodeLine{14985     \textcolor{keywordflow}{while} (n > 0)}
\DoxyCodeLine{14986     \{}
\DoxyCodeLine{14987         \textcolor{comment}{// Invariants:}}
\DoxyCodeLine{14988         \textcolor{comment}{//      M+ = buffer * 10\string^n + (p1 + p2 * 2\string^e)    (buffer = 0 for n = k)}}
\DoxyCodeLine{14989         \textcolor{comment}{//      pow10 = 10\string^(n-\/1) <= p1 < 10\string^n}}
\DoxyCodeLine{14990         \textcolor{comment}{//}}
\DoxyCodeLine{14991         \textcolor{keyword}{const} std::uint32\_t d = p1 / pow10;  \textcolor{comment}{// d = p1 div 10\string^(n-\/1)}}
\DoxyCodeLine{14992         \textcolor{keyword}{const} std::uint32\_t r = p1 \% pow10;  \textcolor{comment}{// r = p1 mod 10\string^(n-\/1)}}
\DoxyCodeLine{14993         \textcolor{comment}{//}}
\DoxyCodeLine{14994         \textcolor{comment}{//      M+ = buffer * 10\string^n + (d * 10\string^(n-\/1) + r) + p2 * 2\string^e}}
\DoxyCodeLine{14995         \textcolor{comment}{//         = (buffer * 10 + d) * 10\string^(n-\/1) + (r + p2 * 2\string^e)}}
\DoxyCodeLine{14996         \textcolor{comment}{//}}
\DoxyCodeLine{14997         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(d <= 9);}
\DoxyCodeLine{14998         buffer[length++] = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + d); \textcolor{comment}{// buffer := buffer * 10 + d}}
\DoxyCodeLine{14999         \textcolor{comment}{//}}
\DoxyCodeLine{15000         \textcolor{comment}{//      M+ = buffer * 10\string^(n-\/1) + (r + p2 * 2\string^e)}}
\DoxyCodeLine{15001         \textcolor{comment}{//}}
\DoxyCodeLine{15002         p1 = r;}
\DoxyCodeLine{15003         n-\/-\/;}
\DoxyCodeLine{15004         \textcolor{comment}{//}}
\DoxyCodeLine{15005         \textcolor{comment}{//      M+ = buffer * 10\string^n + (p1 + p2 * 2\string^e)}}
\DoxyCodeLine{15006         \textcolor{comment}{//      pow10 = 10\string^n}}
\DoxyCodeLine{15007         \textcolor{comment}{//}}
\DoxyCodeLine{15008 }
\DoxyCodeLine{15009         \textcolor{comment}{// Now check if enough digits have been generated.}}
\DoxyCodeLine{15010         \textcolor{comment}{// Compute}}
\DoxyCodeLine{15011         \textcolor{comment}{//}}
\DoxyCodeLine{15012         \textcolor{comment}{//      p1 + p2 * 2\string^e = (p1 * 2\string^-\/e + p2) * 2\string^e = rest * 2\string^e}}
\DoxyCodeLine{15013         \textcolor{comment}{//}}
\DoxyCodeLine{15014         \textcolor{comment}{// Note:}}
\DoxyCodeLine{15015         \textcolor{comment}{// Since rest and delta share the same exponent e, it suffices to}}
\DoxyCodeLine{15016         \textcolor{comment}{// compare the significands.}}
\DoxyCodeLine{15017         \textcolor{keyword}{const} std::uint64\_t rest = (std::uint64\_t\{p1\} << -\/one.e) + p2;}
\DoxyCodeLine{15018         \textcolor{keywordflow}{if} (rest <= delta)}
\DoxyCodeLine{15019         \{}
\DoxyCodeLine{15020             \textcolor{comment}{// V = buffer * 10\string^n, with M-\/ <= V <= M+.}}
\DoxyCodeLine{15021 }
\DoxyCodeLine{15022             decimal\_exponent += n;}
\DoxyCodeLine{15023 }
\DoxyCodeLine{15024             \textcolor{comment}{// We may now just stop. But instead look if the buffer could be}}
\DoxyCodeLine{15025             \textcolor{comment}{// decremented to bring V closer to w.}}
\DoxyCodeLine{15026             \textcolor{comment}{//}}
\DoxyCodeLine{15027             \textcolor{comment}{// pow10 = 10\string^n is now 1 ulp in the decimal representation V.}}
\DoxyCodeLine{15028             \textcolor{comment}{// The rounding procedure works with diyfp's with an implicit}}
\DoxyCodeLine{15029             \textcolor{comment}{// exponent of e.}}
\DoxyCodeLine{15030             \textcolor{comment}{//}}
\DoxyCodeLine{15031             \textcolor{comment}{//      10\string^n = (10\string^n * 2\string^-\/e) * 2\string^e = ulp * 2\string^e}}
\DoxyCodeLine{15032             \textcolor{comment}{//}}
\DoxyCodeLine{15033             \textcolor{keyword}{const} std::uint64\_t ten\_n = std::uint64\_t\{pow10\} << -\/one.e;}
\DoxyCodeLine{15034             \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}{grisu2\_round}}(buffer, length, dist, delta, rest, ten\_n);}
\DoxyCodeLine{15035 }
\DoxyCodeLine{15036             \textcolor{keywordflow}{return};}
\DoxyCodeLine{15037         \}}
\DoxyCodeLine{15038 }
\DoxyCodeLine{15039         pow10 /= 10;}
\DoxyCodeLine{15040         \textcolor{comment}{//}}
\DoxyCodeLine{15041         \textcolor{comment}{//      pow10 = 10\string^(n-\/1) <= p1 < 10\string^n}}
\DoxyCodeLine{15042         \textcolor{comment}{// Invariants restored.}}
\DoxyCodeLine{15043     \}}
\DoxyCodeLine{15044 }
\DoxyCodeLine{15045     \textcolor{comment}{// 2)}}
\DoxyCodeLine{15046     \textcolor{comment}{//}}
\DoxyCodeLine{15047     \textcolor{comment}{// The digits of the integral part have been generated:}}
\DoxyCodeLine{15048     \textcolor{comment}{//}}
\DoxyCodeLine{15049     \textcolor{comment}{//      M+ = d[k-\/1]...d[1]d[0] + p2 * 2\string^e}}
\DoxyCodeLine{15050     \textcolor{comment}{//         = buffer            + p2 * 2\string^e}}
\DoxyCodeLine{15051     \textcolor{comment}{//}}
\DoxyCodeLine{15052     \textcolor{comment}{// Now generate the digits of the fractional part p2 * 2\string^e.}}
\DoxyCodeLine{15053     \textcolor{comment}{//}}
\DoxyCodeLine{15054     \textcolor{comment}{// Note:}}
\DoxyCodeLine{15055     \textcolor{comment}{// No decimal point is generated: the exponent is adjusted instead.}}
\DoxyCodeLine{15056     \textcolor{comment}{//}}
\DoxyCodeLine{15057     \textcolor{comment}{// p2 actually represents the fraction}}
\DoxyCodeLine{15058     \textcolor{comment}{//}}
\DoxyCodeLine{15059     \textcolor{comment}{//      p2 * 2\string^e}}
\DoxyCodeLine{15060     \textcolor{comment}{//          = p2 / 2\string^-\/e}}
\DoxyCodeLine{15061     \textcolor{comment}{//          = d[-\/1] / 10\string^1 + d[-\/2] / 10\string^2 + ...}}
\DoxyCodeLine{15062     \textcolor{comment}{//}}
\DoxyCodeLine{15063     \textcolor{comment}{// Now generate the digits d[-\/m] of p1 from left to right (m = 1,2,...)}}
\DoxyCodeLine{15064     \textcolor{comment}{//}}
\DoxyCodeLine{15065     \textcolor{comment}{//      p2 * 2\string^e = d[-\/1]d[-\/2]...d[-\/m] * 10\string^-\/m}}
\DoxyCodeLine{15066     \textcolor{comment}{//                      + 10\string^-\/m * (d[-\/m-\/1] / 10\string^1 + d[-\/m-\/2] / 10\string^2 + ...)}}
\DoxyCodeLine{15067     \textcolor{comment}{//}}
\DoxyCodeLine{15068     \textcolor{comment}{// using}}
\DoxyCodeLine{15069     \textcolor{comment}{//}}
\DoxyCodeLine{15070     \textcolor{comment}{//      10\string^m * p2 = ((10\string^m * p2) div 2\string^-\/e) * 2\string^-\/e + ((10\string^m * p2) mod 2\string^-\/e)}}
\DoxyCodeLine{15071     \textcolor{comment}{//                = (                   d) * 2\string^-\/e + (                   r)}}
\DoxyCodeLine{15072     \textcolor{comment}{//}}
\DoxyCodeLine{15073     \textcolor{comment}{// or}}
\DoxyCodeLine{15074     \textcolor{comment}{//      10\string^m * p2 * 2\string^e = d + r * 2\string^e}}
\DoxyCodeLine{15075     \textcolor{comment}{//}}
\DoxyCodeLine{15076     \textcolor{comment}{// i.e.}}
\DoxyCodeLine{15077     \textcolor{comment}{//}}
\DoxyCodeLine{15078     \textcolor{comment}{//      M+ = buffer + p2 * 2\string^e}}
\DoxyCodeLine{15079     \textcolor{comment}{//         = buffer + 10\string^-\/m * (d + r * 2\string^e)}}
\DoxyCodeLine{15080     \textcolor{comment}{//         = (buffer * 10\string^m + d) * 10\string^-\/m + 10\string^-\/m * r * 2\string^e}}
\DoxyCodeLine{15081     \textcolor{comment}{//}}
\DoxyCodeLine{15082     \textcolor{comment}{// and stop as soon as 10\string^-\/m * r * 2\string^e <= delta * 2\string^e}}
\DoxyCodeLine{15083 }
\DoxyCodeLine{15084     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(p2 > delta);}
\DoxyCodeLine{15085 }
\DoxyCodeLine{15086     \textcolor{keywordtype}{int} m = 0;}
\DoxyCodeLine{15087     \textcolor{keywordflow}{for} (;;)}
\DoxyCodeLine{15088     \{}
\DoxyCodeLine{15089         \textcolor{comment}{// Invariant:}}
\DoxyCodeLine{15090         \textcolor{comment}{//      M+ = buffer * 10\string^-\/m + 10\string^-\/m * (d[-\/m-\/1] / 10 + d[-\/m-\/2] / 10\string^2 + ...) * 2\string^e}}
\DoxyCodeLine{15091         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (p2                                 ) * 2\string^e}}
\DoxyCodeLine{15092         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * (10 * p2)                   ) * 2\string^e}}
\DoxyCodeLine{15093         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * ((10*p2 div 2\string^-\/e) * 2\string^-\/e + (10*p2 mod 2\string^-\/e)) * 2\string^e}}
\DoxyCodeLine{15094         \textcolor{comment}{//}}
\DoxyCodeLine{15095         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(p2 <= (std::numeric\_limits<std::uint64\_t>::max)() / 10);}
\DoxyCodeLine{15096         p2 *= 10;}
\DoxyCodeLine{15097         \textcolor{keyword}{const} std::uint64\_t d = p2 >> -\/one.e;     \textcolor{comment}{// d = (10 * p2) div 2\string^-\/e}}
\DoxyCodeLine{15098         \textcolor{keyword}{const} std::uint64\_t r = p2 \& (one.f -\/ 1); \textcolor{comment}{// r = (10 * p2) mod 2\string^-\/e}}
\DoxyCodeLine{15099         \textcolor{comment}{//}}
\DoxyCodeLine{15100         \textcolor{comment}{//      M+ = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * (d * 2\string^-\/e + r) * 2\string^e}}
\DoxyCodeLine{15101         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * (d + r * 2\string^e))}}
\DoxyCodeLine{15102         \textcolor{comment}{//         = (buffer * 10 + d) * 10\string^(-\/m-\/1) + 10\string^(-\/m-\/1) * r * 2\string^e}}
\DoxyCodeLine{15103         \textcolor{comment}{//}}
\DoxyCodeLine{15104         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(d <= 9);}
\DoxyCodeLine{15105         buffer[length++] = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + d); \textcolor{comment}{// buffer := buffer * 10 + d}}
\DoxyCodeLine{15106         \textcolor{comment}{//}}
\DoxyCodeLine{15107         \textcolor{comment}{//      M+ = buffer * 10\string^(-\/m-\/1) + 10\string^(-\/m-\/1) * r * 2\string^e}}
\DoxyCodeLine{15108         \textcolor{comment}{//}}
\DoxyCodeLine{15109         p2 = r;}
\DoxyCodeLine{15110         m++;}
\DoxyCodeLine{15111         \textcolor{comment}{//}}
\DoxyCodeLine{15112         \textcolor{comment}{//      M+ = buffer * 10\string^-\/m + 10\string^-\/m * p2 * 2\string^e}}
\DoxyCodeLine{15113         \textcolor{comment}{// Invariant restored.}}
\DoxyCodeLine{15114 }
\DoxyCodeLine{15115         \textcolor{comment}{// Check if enough digits have been generated.}}
\DoxyCodeLine{15116         \textcolor{comment}{//}}
\DoxyCodeLine{15117         \textcolor{comment}{//      10\string^-\/m * p2 * 2\string^e <= delta * 2\string^e}}
\DoxyCodeLine{15118         \textcolor{comment}{//              p2 * 2\string^e <= 10\string^m * delta * 2\string^e}}
\DoxyCodeLine{15119         \textcolor{comment}{//                    p2 <= 10\string^m * delta}}
\DoxyCodeLine{15120         delta *= 10;}
\DoxyCodeLine{15121         dist  *= 10;}
\DoxyCodeLine{15122         \textcolor{keywordflow}{if} (p2 <= delta)}
\DoxyCodeLine{15123         \{}
\DoxyCodeLine{15124             \textcolor{keywordflow}{break};}
\DoxyCodeLine{15125         \}}
\DoxyCodeLine{15126     \}}
\DoxyCodeLine{15127 }
\DoxyCodeLine{15128     \textcolor{comment}{// V = buffer * 10\string^-\/m, with M-\/ <= V <= M+.}}
\DoxyCodeLine{15129 }
\DoxyCodeLine{15130     decimal\_exponent -\/= m;}
\DoxyCodeLine{15131 }
\DoxyCodeLine{15132     \textcolor{comment}{// 1 ulp in the decimal representation is now 10\string^-\/m.}}
\DoxyCodeLine{15133     \textcolor{comment}{// Since delta and dist are now scaled by 10\string^m, we need to do the}}
\DoxyCodeLine{15134     \textcolor{comment}{// same with ulp in order to keep the units in sync.}}
\DoxyCodeLine{15135     \textcolor{comment}{//}}
\DoxyCodeLine{15136     \textcolor{comment}{//      10\string^m * 10\string^-\/m = 1 = 2\string^-\/e * 2\string^e = ten\_m * 2\string^e}}
\DoxyCodeLine{15137     \textcolor{comment}{//}}
\DoxyCodeLine{15138     \textcolor{keyword}{const} std::uint64\_t ten\_m = one.f;}
\DoxyCodeLine{15139     \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}{grisu2\_round}}(buffer, length, dist, delta, p2, ten\_m);}
\DoxyCodeLine{15140 }
\DoxyCodeLine{15141     \textcolor{comment}{// By construction this algorithm generates the shortest possible decimal}}
\DoxyCodeLine{15142     \textcolor{comment}{// number (Loitsch, Theorem 6.2) which rounds back to w.}}
\DoxyCodeLine{15143     \textcolor{comment}{// For an input number of precision p, at least}}
\DoxyCodeLine{15144     \textcolor{comment}{//}}
\DoxyCodeLine{15145     \textcolor{comment}{//      N = 1 + ceil(p * log\_10(2))}}
\DoxyCodeLine{15146     \textcolor{comment}{//}}
\DoxyCodeLine{15147     \textcolor{comment}{// decimal digits are sufficient to identify all binary floating-\/point}}
\DoxyCodeLine{15148     \textcolor{comment}{// numbers (Matula, "{}In-\/and-\/Out conversions"{}).}}
\DoxyCodeLine{15149     \textcolor{comment}{// This implies that the algorithm does not produce more than N decimal}}
\DoxyCodeLine{15150     \textcolor{comment}{// digits.}}
\DoxyCodeLine{15151     \textcolor{comment}{//}}
\DoxyCodeLine{15152     \textcolor{comment}{//      N = 17 for p = 53 (IEEE double precision)}}
\DoxyCodeLine{15153     \textcolor{comment}{//      N = 9  for p = 24 (IEEE single precision)}}
\DoxyCodeLine{15154 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2\_round@{grisu2\_round}}
\index{grisu2\_round@{grisu2\_round}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2\_round()}{grisu2\_round()}}
{\footnotesize\ttfamily void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2\+\_\+round (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int}]{len,  }\item[{std\+::uint64\+\_\+t}]{dist,  }\item[{std\+::uint64\+\_\+t}]{delta,  }\item[{std\+::uint64\+\_\+t}]{rest,  }\item[{std\+::uint64\+\_\+t}]{ten\+\_\+k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 14880 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14882 \{}
\DoxyCodeLine{14883     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(len >= 1);}
\DoxyCodeLine{14884     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(dist <= delta);}
\DoxyCodeLine{14885     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(rest <= delta);}
\DoxyCodeLine{14886     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(ten\_k > 0);}
\DoxyCodeLine{14887 }
\DoxyCodeLine{14888     \textcolor{comment}{//               <-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ delta -\/-\/-\/-\/>}}
\DoxyCodeLine{14889     \textcolor{comment}{//                                  <-\/-\/-\/-\/ dist -\/-\/-\/-\/-\/-\/-\/-\/-\/>}}
\DoxyCodeLine{14890     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{14891     \textcolor{comment}{//               M-\/                 w                   M+}}
\DoxyCodeLine{14892     \textcolor{comment}{//}}
\DoxyCodeLine{14893     \textcolor{comment}{//                                  ten\_k}}
\DoxyCodeLine{14894     \textcolor{comment}{//                                <-\/-\/-\/-\/-\/-\/>}}
\DoxyCodeLine{14895     \textcolor{comment}{//                                       <-\/-\/-\/-\/ rest -\/-\/-\/-\/>}}
\DoxyCodeLine{14896     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{14897     \textcolor{comment}{//                                  w    V}}
\DoxyCodeLine{14898     \textcolor{comment}{//                                       = buf * 10\string^k}}
\DoxyCodeLine{14899     \textcolor{comment}{//}}
\DoxyCodeLine{14900     \textcolor{comment}{// ten\_k represents a unit-\/in-\/the-\/last-\/place in the decimal representation}}
\DoxyCodeLine{14901     \textcolor{comment}{// stored in buf.}}
\DoxyCodeLine{14902     \textcolor{comment}{// Decrement buf by ten\_k while this takes buf closer to w.}}
\DoxyCodeLine{14903 }
\DoxyCodeLine{14904     \textcolor{comment}{// The tests are written in this order to avoid overflow in unsigned}}
\DoxyCodeLine{14905     \textcolor{comment}{// integer arithmetic.}}
\DoxyCodeLine{14906 }
\DoxyCodeLine{14907     \textcolor{keywordflow}{while} (rest < dist}
\DoxyCodeLine{14908             \&\& delta -\/ rest >= ten\_k}
\DoxyCodeLine{14909             \&\& (rest + ten\_k < dist || dist -\/ rest > rest + ten\_k -\/ dist))}
\DoxyCodeLine{14910     \{}
\DoxyCodeLine{14911         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(buf[len -\/ 1] != \textcolor{charliteral}{'0'});}
\DoxyCodeLine{14912         buf[len -\/ 1]-\/-\/;}
\DoxyCodeLine{14913         rest += ten\_k;}
\DoxyCodeLine{14914     \}}
\DoxyCodeLine{14915 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a1c5d30eb51e5e994a3f48bde104d2ce8}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a1c5d30eb51e5e994a3f48bde104d2ce8}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!reinterpret\_bits@{reinterpret\_bits}}
\index{reinterpret\_bits@{reinterpret\_bits}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{reinterpret\_bits()}{reinterpret\_bits()}}
{\footnotesize\ttfamily template$<$typename Target , typename Source $>$ \\
Target nlohmann\+::detail\+::dtoa\+\_\+impl\+::reinterpret\+\_\+bits (\begin{DoxyParamCaption}\item[{const Source}]{source }\end{DoxyParamCaption})}



Definition at line 14380 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{14381 \{}
\DoxyCodeLine{14382     static\_assert(\textcolor{keyword}{sizeof}(Target) == \textcolor{keyword}{sizeof}(Source), \textcolor{stringliteral}{"{}size mismatch"{}});}
\DoxyCodeLine{14383 }
\DoxyCodeLine{14384     Target target;}
\DoxyCodeLine{14385     std::memcpy(\&target, \&source, \textcolor{keyword}{sizeof}(Source));}
\DoxyCodeLine{14386     \textcolor{keywordflow}{return} target;}
\DoxyCodeLine{14387 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!kAlpha@{kAlpha}}
\index{kAlpha@{kAlpha}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{kAlpha}{kAlpha}}
{\footnotesize\ttfamily constexpr int nlohmann\+::detail\+::dtoa\+\_\+impl\+::k\+Alpha = -\/60\hspace{0.3cm}{\ttfamily [constexpr]}}



Definition at line 14643 of file json.\+hpp.

\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!kGamma@{kGamma}}
\index{kGamma@{kGamma}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{kGamma}{kGamma}}
{\footnotesize\ttfamily constexpr int nlohmann\+::detail\+::dtoa\+\_\+impl\+::k\+Gamma = -\/32\hspace{0.3cm}{\ttfamily [constexpr]}}



Definition at line 14644 of file json.\+hpp.

